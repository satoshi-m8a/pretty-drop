/*! pretty-drop - v0.0.1 - 2014-04-13
* https://github.com/satoshi.m8a/pretty-drop
* Copyright (c) 2014 satoshi.m8a; Licensed MIT */
!function(a){"use strict";function b(b,c){this.element=a(b),this.options=c,this.menus=b.find(this.options.menuSelector),this.count=0,this.tracks=new Array(this.options.track);var d,e,f,g,h=!0,i=this;this.element.on("mouseleave",function(){e=setTimeout(function(){g&&c.deactive(g),h=!0},c.closeDelay)}),this.element.on("mouseenter",function(){e&&clearTimeout(e)}),this.menus.each(function(){var b=a(this),e=!1;b.on("mouseenter",function(){return h?(g=b,c.active(b),void(h=!1)):(e=!1,d&&clearTimeout(d),void(d=setTimeout(function(){f&&c.deactive(f),e||(g=b,c.active(b))},i.calcDelay())))}),b.on("mouseleave",function(){e=!0,b===g&&(f=b)}),b.on("mousemove",function(a){i.trackPosition({x:a.pageX,y:a.pageY})})})}b.prototype.trackPosition=function(a){var b=this.count%this.options.track;this.tracks[b]=a,this.count++},b.prototype.calcDelay=function(){var a=(this.count-1)%this.options.track,b=this.count%this.options.track,c=this.tracks[a],d=this.tracks[b];if(d||(d=this.tracks[0]),this.count<this.track&&!c&&(c=this.tracks[this.count]),!c&&!d)return this.options.defaultDelay;var e=180*Math.atan2(c.y-d.y,c.x-d.x)/Math.PI;return 0>=e?this.options.defaultDelay:(e>90&&(e=180-e),this.options.delay*e)},b.defaults={active:a.noop,deactive:a.noop,menuSelector:"li",delay:100,defaultDelay:300,track:5,closeDelay:500};var c=a.fn.prettyDrop;a.fn.prettyDrop=function(c){return this.each(function(){var d=a(this);return c=a.extend({},b.defaults,c),new b(d,c)})},a.fn.prettyDrop.Constructor=b,a.fn.prettyDrop.noConflict=function(){return a.fn.prettyDrop=c,this}}(jQuery);